
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../contrib/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Specification - Spindle Token</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-KTQKK1C4F3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-KTQKK1C4F3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-KTQKK1C4F3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#open-privacy-preserving-record-linkage-protocol" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Spindle Token" class="md-header__button md-logo" aria-label="Spindle Token" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spindle Token
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Specification
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Spindle-Health/carduus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spindle Token" class="md-nav__button md-logo" aria-label="Spindle Token" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Spindle Token
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Spindle-Health/carduus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spindle Token on Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/custom-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Tokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/migrating-from-carduus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from Carduus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Line Interface
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    carduus (legacy)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            carduus (legacy)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../carduus/guides/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../carduus/guides/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus on Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../carduus/guides/custom-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining Token Specs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../carduus/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../carduus/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OPPRL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            OPPRL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="open-privacy-preserving-record-linkage-protocol">Open Privacy Preserving Record Linkage Protocol</h1>
<p>Version 1.0</p>
<h1 id="1-overview">1. Overview</h1>
<p>This document is a specification for the Open Privacy Preserving Record
Linkage (OPPRL) protocol, which brings the capability to link records
across datasets without sharing raw Personally Identifiable Information
(PII). The protocol is designed with the following goals:</p>
<ul>
<li>
<p><strong>Interoperability</strong> - Implementations can be created in many data
  systems while ensuring that tokens generated by different
  implementations remain compatible.</p>
</li>
<li>
<p><strong>Security</strong> - Carefully selected encryption algorithms are used at
  each point in the process to mitigate any chance of catastrophic
  failure or information leakage.</p>
</li>
<li>
<p><strong>Decentralization</strong> - No trusted third parties are needed to act as
  centralized authorities. No single point of failure.</p>
</li>
<li>
<p><strong>Scalability</strong> - Tokenization is an embarrassingly parallel task that
  should scale efficiently to billions of records.</p>
</li>
</ul>
<p>Privacy Preserving Record Linkage (PPRL) is a crucial component to data
de-identification systems. PPRL obfuscates identifying attributes or
other sensitive information about the subjects described in the records
of a dataset while still preserving the ability to link records
pertaining to the same subject using an encrypted token. This practice
is sometimes referred to as “tokenization” and is one of the components
of data de-identification.</p>
<p>The task of PPRL is to replace the attributes of every record denoting
Personally Identifiable Information (PII) with a token produced by a
one-way cryptographic function. This prevents observers of the tokenized
data from obtaining the PII. The tokens are produced deterministically
such that input records with the same, or similar, PII attributes will
produce an identical token. This allows practitioners to associate
records across datasets that are highly likely to belong to the same
data subject without having access to PII.</p>
<p>Tokenization is also used when data is shared between organizations to
limit, or in some cases fully mitigate, the risk of subject
re-identification in the event an untrusted third party gains access to
a dataset containing sensitive data. Each party produces encrypted
tokens using a different secret key so that any compromised data asset
is, at worst, only matchable to other datasets maintained by the same
party. During data sharing transactions, a specific “transcode” data
flow is used to first re-encrypt the sender’s tokens into ephemeral
tokens that do not match tokens in any other dataset and can only be
ingested using the recipient’s secret key. At no point in the
“transcode” data flow is the original PII used.</p>
<h1 id="2-glossary">2. Glossary</h1>
<p><strong>Asymmetric Encryption:</strong> Encryption using a pair of keys: a public key
for encryption and a private key for decryption. Allows secure
communication without pre-sharing a secret key.</p>
<p><strong>Attribute:</strong> A single field of a record denoting one piece of
information about the subject. </p>
<p><strong>Custodian:</strong> A user in possession of a data asset.</p>
<p><strong>Data Asset:</strong> A collection of records with attributes. Can be a single
dataset, or a collection of related datasets.</p>
<p><strong>Derived Attribute:</strong> An attribute created by transforming another
attribute. For example, a first initial attribute can be derived from
a first name attribute. </p>
<p><strong>Ephemeral Token:</strong> A token produced with
non-deterministic encryption (ie. RSA with OAEP and MGF1) that is used
when data is in transit from a sender to recipient. Ephemeral tokens
cannot be used for record linkage until they are transcoded into normal
tokens by the recipient.</p>
<p><strong>Implementer:</strong> An individual or organization that creates a software
tool that implements this specification.</p>
<p><strong>Normalization:</strong> A transformation applied to an attribute to
standardize the representation and remove aesthetic differences.
Normalized attributes are more likely to equate across records pertaining
to the same subject without increasing the likelihood of equality across
records pertaining to different subjects. Example:
removing leading and trailing whitespace characters.</p>
<p><strong>Personally Identifying Information (PII):</strong> Attributes of a data asset
that can be used to determine the identity of a subject. Examples
include name, residential address, gender, age, phone number, email, as
well as other demographic or socio-economic attributes.</p>
<p><strong>Recipient:</strong> A user that receives a data asset from a custodian.</p>
<p><strong>Subject:</strong> A person who is being described by one or more records in a
data asset.</p>
<p><strong>Symmetric Encryption:</strong> Encryption using a single secret key for both
encryption and decryption. Faster than asymmetric encryption but
requires secure key exchange. </p>
<p><strong>Token:</strong> A string of text produced by
encrypting the hash of concatenated, normalized PII fields. Used
deterministically for record linkage.</p>
<p><strong>Transcode:</strong> The process of securely transforming tokens encrypted
with a sender’s key into tokens encrypted with a recipient’s key,
enabling linkage without sharing private keys or PII. Data being
transcoded has ephemeral tokens while in transit.</p>
<p><strong>User:</strong> The end user of an OPPRL implementation. May refer to an
individual or organization.</p>
<h1 id="3-encryption-keys"><a name="keys"></a> 3. Encryption Keys</h1>
<p>The OPPRL protocol relies heavily on cryptographic functions. Some of
these functions encrypt and decrypt values using an encryption key.</p>
<h2 id="31-user-specific-rsa-key-pair"><a name="rsa_key"></a> 3.1 User Specific RSA Key Pair</h2>
<p>A user/organization specific RSA key pair consisting of a private key
and corresponding public key. Keys should be 2048 bits or larger
[RFC 8017].</p>
<p>Under no circumstances should a user’s private key be shared with other
users or any other third party. Doing so would compromise security and
privacy of the user’s OPPRL tokens.</p>
<p>Implementers may add additional functionality to manage this key pair on
behalf of users, or rely on the user to supply their own keys. Secure
method for this are out of scope for this protocol.</p>
<h2 id="32-derived-aes-key"><a name="aes_key"></a> 3.2 Derived AES Key</h2>
<p>A key used when performing AES-GCM-SIV symmetric encryption and
decryption. To reduce the number of encryption keys that users must
coordinate, this key is derived from the private key of the user
specific RSA key pair.</p>
<p>During normal operation, users should not be accessing this AES key and
it should never be persisted or output in any way by OPPRL
implementations.</p>
<h3 id="321-version-10">3.2.1 Version &gt;=1.0</h3>
<p>A 32 byte key is derived from the user’s private RSA key using the HKDF
algorithm [RFC 5869].</p>
<p>When deriving the AES key using HKDF, no salt is used and the “info”
argument is set as the UTF-8 encoding of the text “opprl.v1.aes” in
order to ensure the derived key is specific to the OPPRL key derivation.</p>
<h3 id="322-version-10">3.2.2 Version &lt;1.0</h3>
<p>A 32 byte key is derived from the user’s private RSA key using the
SHAKE256 algorithm [FIPS 202].</p>
<h1 id="4-functions"><a name="funcs"></a> 4. Functions</h1>
<p>A variety of transformations are used when normalizing PII and encoding
encrypted data as text. In order to preserve token equality across
implementations, this section describes the suite of relevant
transformations as functions. These functions are referenced throughout
the remainder of this document to describe the behavior of data flows.</p>
<h3 id="alpha_ws_only"><code>ALPHA_WS_ONLY</code></h3>
<p>Remove all characters of a string aside from alpha characters 
(<a href="https://en.wikipedia.org/wiki/Regular_expression#IEEE_POSIX_Standard">IEEE POSIX Standard</a>
regular expression <code>[a-zA-Z]</code>) and whitespace.</p>
<p>Example: <code>ALPHA_WS_ONLY("Hello... world!") =&gt; "Hello world"</code></p>
<h3 id="base64_no_newline"><code>BASE64_NO_NEWLINE</code></h3>
<p>Convert binary data into a string of text using the base64 encoding
without any newline characters in the output [RFC 4648].</p>
<p>Many implementations of base64 conform to the Multipurpose Internet Mail
Extensions (MIME) standard which adds newline characters every 76
characters [RFC 2045]. These characters have no impact on
decoding, and we remove them because writing multi-line strings to text
files can cause issues if not handled carefully.</p>
<p>Example: <code>BASE64_NO_NEWLINE("abc") =&gt; "YWJj"</code></p>
<h3 id="collapse_ws"><code>COLLAPSE_WS</code></h3>
<p>Replace all sub-strings of one or more whitespace characters to a single
space character.</p>
<p>Example: <code>COLLAPSE_WS("Hello   world   ") =&gt; "Hello world "</code></p>
<h3 id="decrypt_aes_gcm_siv"><code>DECRYPT_AES_GCM_SIV</code></h3>
<p>Decrypts input binary data using the AES-GCM-SIV algorithm and user’s
secret key from <a href="#aes_key" class="ref">Section 3.2</a>. This specific
variant of AES is resistant to nonce reuse, which is critical for
tokenization applications [RFC 8452].</p>
<h3 id="decrypt_rsa"><code>DECRYPT_RSA</code></h3>
<p>Decrypts input binary data using the RSA algorithm and the private key
corresponding to the public key used to encrypt the data. This function
should use OAEP padding with SHA256 for both the mask generation
function (MGF1) and the hashing algorithm [RFC 8017].</p>
<p>See <a href="#rsa_key" class="ref">Section 3.1</a> for more details about the RSA
key pair.</p>
<h3 id="digits_only"><code>DIGITS_ONLY</code></h3>
<p>Removes all non-digit characters from a string of text.</p>
<p>Example: <code>DIGITS_ONLY("abc-123 456") =&gt; "123456"</code></p>
<h3 id="empty_to_null"><code>EMPTY_TO_NULL</code></h3>
<p>Null if the given string is empty, otherwise return the string
unchanged.</p>
<p>Example:</p>
<p><code>EMPTY_TO_NULL("") =&gt; null</code></p>
<p><code>EMPTY_TO_NULL("abc") =&gt; "abc"</code></p>
<h3 id="encrypt_aes_gcm_siv"><code>ENCRYPT_AES_GCM_SIV</code></h3>
<p>Encrypts input binary data using the AES-GCM-SIV algorithm and user’s
secret key from <a href="#aes_key" class="ref">Section 3.2</a>
[RFC 8452].</p>
<h3 id="encrypt_rsa"><code>ENCRYPT_RSA</code></h3>
<p>Encrypts input binary data using the RSA algorithm and a recipient’s
public key. See <a href="#rsa_key" class="ref">Section 3.1</a> [RFC 8017].</p>
<h3 id="first_char"><code>FIRST_CHAR</code></h3>
<p>Returns the first character of the given string.</p>
<p>Example: <code>FIRST_CHAR("abc") =&gt; "a"</code></p>
<h3 id="format_date"><code>FORMAT_DATE</code></h3>
<p>Returns the given date as a formatted string in the <code>yyyy-MM-dd</code> format.</p>
<p>Example: <code>FORMAT_DATE(date) =&gt; "1997-01-01"</code></p>
<h3 id="is_valid_ssn"><code>IS_VALID_SSN</code></h3>
<p>Returns <code>TRUE</code> if the input string is a valid US Social Security Number
and <code>FALSE</code> otherwise [SSA 1982, SSA 2011].</p>
<ul>
<li>
<p>The string must be exactly 9 numeric characters.</p>
</li>
<li>
<p>The first character must not be a “9”</p>
</li>
<li>
<p>The area number must not be “000” or “666”</p>
</li>
<li>
<p>The group number must not be “00”</p>
</li>
<li>
<p>The serial number must not be “0000”</p>
</li>
</ul>
<h3 id="lowercase"><code>LOWERCASE</code></h3>
<p>Convert all alpha characters of a string to lowercase. Leave digits and
whitespace unchanged.</p>
<p>Example: <code>LOWERCASE("ABC 123") =&gt; "abc 123"</code></p>
<h3 id="metaphone"><code>METAPHONE</code></h3>
<p>Returns the Metaphone phonetic encoding of a string
[Philips 1990].</p>
<p>Example: <code>METAPHONE("Healthcare") =&gt; "HL0KR"</code></p>
<h3 id="null_if_not"><code>NULL_IF_NOT</code></h3>
<p>Takes a boolean condition and a value. If the condition is true, returns
the value unchanged. Otherwise return <code>NULL</code>.</p>
<p>Example:</p>
<p><code>NULL_IF_NOT(TRUE, "abc") =&gt; "abc"</code></p>
<p><code>NULL_IF_NOT(FALSE, "abc") =&gt; NULL</code></p>
<h3 id="parse_date"><code>PARSE_DATE</code></h3>
<p>Parses a date (or timestamp) from a string of text. The exact logic will
vary by use case depending on the format of the input string.</p>
<h3 id="remap"><code>REMAP</code></h3>
<p>Remaps the input value according to a lookup table. Non-null input
values that are not found in the lookup table are given a default output
value.</p>
<p><code>NULL</code> values in the input are propagated as <code>NULL</code> output values.</p>
<p>Example:</p>
<pre><code>lookup = {"A" -&gt; "X",
          "B" -&gt; "Y",
          "C" -&gt; "Z"}
REMAP("B", lookup, default="unknown") =&gt; "Y"
REMAP("D", lookup, default="unknown") =&gt; "unknown"
REMAP(NULL, lookup, default="unknown") =&gt; NULL
</code></pre>
<h3 id="remove_ws"><code>REMOVE_WS</code></h3>
<p>Remove all whitespace characters from the given string.</p>
<p>Example: <code>REMOVE_WS(" a b c  d") =&gt; "abc"</code></p>
<h3 id="sha256"><code>SHA256</code></h3>
<p>Hash the input using the SHA256 function [FIPS 180-4].</p>
<h3 id="soundex"><code>SOUNDEX</code></h3>
<p>Returns the Soundex phonetic encoding of the input text
[Russell 1922].</p>
<p>Example: <code>SOUNDEX("Healthcare") =&gt; "H432"</code></p>
<h3 id="to_e164"><code>TO_E164</code></h3>
<p>Takes a string containing a phone number and returns a string of text
representing the same phone number in the E.164 international standard
[ITU E.164].</p>
<p>Example: <code>TO_E164("(234) 555-6789") =&gt; "+12345556789"</code></p>
<h3 id="to_string"><code>TO_STRING</code></h3>
<p>Returns the input as a string of text. If given a string, returns the
input unchanged.</p>
<p>Example: <code>TO_STRING(123) =&gt; "123"</code></p>
<h3 id="trim"><code>TRIM</code></h3>
<p>Remove all leading and trailing whitespace from a string.</p>
<p>Example: <code>TRIM("  abc  ") =&gt; "abc"</code></p>
<h3 id="truncate_to_date"><code>TRUNCATE_TO_DATE</code></h3>
<p>Truncates a value representing a point in time to the start of the day.
In other words, this function removes all components of the point in time
smaller than a day such as hour, minute, and second. The only components
present on the outputs should be year, month, and day.</p>
<p>If the input value is simply a date with no time components
the date should be returned unchanged.</p>
<p>Depending on the host platform used to implement the protocol, the input
values may be expressed as an instance of a data type called datetime or 
timestamp. </p>
<p>The inputs should not be a <a href="https://en.wikipedia.org/wiki/Unix_time">UNIX epoch</a>
unless a corresponding timezone is known. Otherwise an accurate date 
cannot be derived.</p>
<p>The output should be a local date without timezone information.</p>
<p>Using SQL semantics, this function should be equivalent to 
<code>CAST(DATE_TRUNC("day", input_timestamp) AS DATE)</code>. For most variants of
SQL, the invocation of <code>DATE_TRUNC</code> is redundant, but we include it here
for illustrative purposes.</p>
<p>Example: <code>TRUNCATE_TO_DATE(2025-09-26 14:19:38.975197) =&gt; 2025-09-26</code></p>
<h3 id="unbase64"><code>UNBASE64</code></h3>
<p>Decode a base64 encoded string into binary.</p>
<h3 id="uppercase"><code>UPPERCASE</code></h3>
<p>Convert all alpha characters of a string to uppercase. Leave digits and
whitespace unchanged.</p>
<p>Example: <code>UPERCASE("abc 123") =&gt; "ABC 123"</code></p>
<h1 id="5-canonical-pii-attributes"><a name="attributes"></a> 5. Canonical PII Attributes</h1>
<p>This section contains descriptions of the canonical PII attributes used
to create the standard OPPRL tokens detailed in
<a href="#token_specs" class="ref">Section 6.3</a>. Each attribute has standard
normalization that should be shared by all OPPRL implementations to
improve link quality.</p>
<h2 id="51-first-name">5.1 First Name</h2>
<p>The subject’s first name.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = ALPHA_WS_ONLY(input)
x = UPPERCASE(x)
x = COLLAPSE_WS(x)
x = TRIM(x)
x = EMPTY_TO_NULL(x)
return x
</code></pre>
<h2 id="52-first-initial">5.2 First Initial</h2>
<p>The initial of the subject’s first name.</p>
<p>If deriving from the subject’s full first name, perform all
normalizations from <a href="#first_name" class="ref">Section 5.1</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = FIRST_CHAR(input)
x = UPPERCASE(x)
return x
</code></pre>
<h2 id="53-first-soundex">5.3 First Soundex</h2>
<p>The Soundex phonetic encoding of the subject’s first name.</p>
<p>If deriving from the subject’s full first name, perform all
normalizations from <a href="#first_name" class="ref">Section 5.1</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = SOUNDEX(input)
return x
</code></pre>
<h2 id="54-first-metaphone">5.4 First Metaphone</h2>
<p>The Metaphone phonetic encoding of the subject’s first name.</p>
<p>If deriving from the subject’s full first name, perform all
normalizations from <a href="#first_name" class="ref">Section 5.1</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = METAPHONE(input)
return x
</code></pre>
<h2 id="55-last-name">5.5 Last Name</h2>
<p>The subject’s last (aka family) name.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = ALPHA_WS_ONLY(input)
x = UPPERCASE(x)
x = COLLAPSE_WS(x)
x = TRIM(x)
x = EMPTY_TO_NULL(x)
return x
</code></pre>
<h2 id="56-last-initial">5.6 Last Initial</h2>
<p>The initial of the subject’s last name.</p>
<p>If deriving from the subject’s full last name, perform all
normalizations from <a href="#last_name" class="ref">Section 5.5</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = FIRST_CHAR(input)
x = UPPERCASE(x)
return x
</code></pre>
<h2 id="57-last-soundex">5.7 Last Soundex</h2>
<p>The Soundex phonetic encoding of the subject’s last name.</p>
<p>If deriving from the subject’s full last name, perform all
normalizations from <a href="#last_name" class="ref">Section 5.5</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = SOUNDEX(input)
return x
</code></pre>
<h2 id="58-last-metaphone">5.8 Last Metaphone</h2>
<p>The Metaphone phonetic encoding of the subject’s last name.</p>
<p>If deriving from the subject’s full last name, perform all
normalizations from <a href="#last_name" class="ref">Section 5.5</a> prior to
computing this attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = METAPHONE(input)
return x
</code></pre>
<h2 id="59-gender">5.9 Gender</h2>
<p>The subject’s gender. Normalized non-null values are either
“F” for female, “M” for male, or “O” for other.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = UPPERCASE(input)
x = COLLAPSE_WS(x)
x = TRIM(x)
x = EMPTY_TO_NULL(x)
x = FIRST_CHAR(x)
mapping = {
  "F" -&gt; "F"
  "W" -&gt; "F", 
  "G" -&gt; "F",
  "M" -&gt; "M",
  "B" -&gt; "M",
}
x = REMAP(x, mapping, "O")
return x
</code></pre>
<h2 id="510-birth-date">5.10 Birth Date</h2>
<p>The subject’s date of birth.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = input
if x is a string:
  x = PARSE_DATE(x)
x = TRUNCATE_TO_DATE(x)
x = FORMAT_DATE(x)
return x
</code></pre>
<h2 id="511-email-address">5.11 Email Address</h2>
<p>An email address associated with the subject.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = LOWERCASE(input)
x = REMOVE_WS(x)
x = EMPTY_TO_NULL(x)
return x
</code></pre>
<h2 id="512-hashed-email-address">5.12 Hashed Email Address</h2>
<p>A SHA256 hash of an email address associated with the subject. This
attribute is often called a Hashed Email Address (HEM) and is a widely
used identifier in industry practice, although it alone has some privacy
concerns addressed by tokenization [Liveramp 2022].</p>
<p>If deriving from the subject’s email address, perform all normalizations
from <a href="#email" class="ref">Section 5.11</a> prior to computing this
attribute.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = LOWERCASE(x)
return x
</code></pre>
<h2 id="513-phone-number">5.13 Phone Number</h2>
<p>A phone number associated with the subject represented as a E.164
formatted string of text [ITU E.164].</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = TO_STRING(input)
x = TO_E164(x)
return x
</code></pre>
<h2 id="514-social-security-number">5.14 Social Security Number</h2>
<p>The subject’s US social security number
[SSA 1982, SSA 2011].</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = TO_STRING(input)
x = DIGITS_ONLY(x)
x = NULL_IF_NOT(IS_VALID_SSN(x))
return x
</code></pre>
<h2 id="515-health-plan-group-number">5.15 Health Plan Group Number</h2>
<p>The group number of the subject’s health plan.</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = UPPERCASE(input)
x = REMOVE_WS(x)
x = EMPTY_TO_NULL(x)
return x
</code></pre>
<h2 id="516-health-plan-member-id">5.16 Health Plan Member ID</h2>
<p>The subject’s health plan member ID (aka subscriber ID).</p>
<p><strong>Normalization:</strong></p>
<pre><code>x = UPPERCASE(input)
x = REMOVE_WS(x)
x = EMPTY_TO_NULL(x)
return x
</code></pre>
<h1 id="6-tokenizing-pii">6. Tokenizing PII</h1>
<p>To create tokens from a record of PII attributes, a multi-stage workflow
is performed that combines multiple PII values together, hashes them,
and encrypts the resulting hash with the user’s secret key. The specific
subsets of PII attributes and cryptographic functions have been
carefully selected to protect the security and privacy of subjects while
minimizing the false negative and false positive match rates when
linking.</p>
<p>For the remainder of this section, we assume that all PII values have
been properly normalized. See <a href="#attributes" class="ref">Section 6</a> for
the canonical normalization rules of every PII attribute.</p>
<h2 id="61-data-flow-pii-to-tokens">6.1 Data Flow: PII to Tokens</h2>
<p>The following subsections describe the process of generating a token
from a set of PII attributes, <em>A</em>, from a record, <em>R</em>.</p>
<p>We denote the PII value of <em>R</em> corresponding to attribute <em>a</em> ∈ <em>A</em> as
<em>R</em><sub><em>a</em></sub>. For example, if <em>A</em> = {first,  last,  birth_date}
then it may be that <em>R</em><sub>first </sub> ↦  John and
<em>R</em><sub>last </sub> ↦  Doe.</p>
<p>If <em>R</em><sub><em>a</em></sub> = NULL for any <em>a</em> ∈ <em>A</em>, the output token is NULL
and all steps of this process should be skipped.</p>
<h3 id="611-joining-pii"><a name="joining"></a> 6.1.1 Joining PII</h3>
<p>The PII values for the token’s attributes are joined into one plaintext
string of text. Assuming the token’s attributes are independent, the
cardinality of this string is the product of attribute cardinalities.
Large cardinalities protect against frequency attacks.</p>
<p><strong>Input:</strong> A record <em>R</em>, containing normalized PII values for each token
attribute <em>a</em> ∈ <em>A</em>.</p>
<p><strong>Process:</strong></p>
<p>Let <em>A</em><sup>′</sup> be a sorted version of <em>A</em> such that attribute names
are arranged in lexicographic order. This ensures the joined PII plaintext
is consistent irrespective of the order of at PII attributes and record
fields.</p>
<p>Join all PII values <em>R</em><sub><em>a</em></sub> for all <em>a</em> ∈ <em>A</em><sup>′</sup> in
order. Each values is separated by a colon (<code>:</code>) character.</p>
<p><strong>Result:</strong> A string of text containing all PII values delimited by a
colon.</p>
<p>Example: <code>"1970-01-01:John:Doe"</code></p>
<h3 id="612-hashing">6.1.2 Hashing</h3>
<p>The joined PII plaintext is obfuscated by a cryptographic hash function
(<code>SHA512</code>) to prevent any reversal of tokens back to PII. After the PII
has been hashed, the PII plaintext is never used at any point during
tokenization or linking [FIPS 180-4].</p>
<p><strong>Input:</strong> A joined plaintext PII string from
<a href="#joining" class="ref">Section 6.1.1</a>.</p>
<p><strong>Process:</strong> Hash the input with the <code>SHA512</code> hash function.</p>
<p><strong>Result:</strong> A 64 byte hash value.</p>
<h3 id="613-encryption">6.1.3 Encryption</h3>
<p>The hash values from <a href="#hashing" class="ref">Section 6.2.2</a> are the same
for all users when generated from the same PII records. It is crucial for each user
to generate tokens that are unique for that user. If one user has a 
re-identification incident – such as a custodial leak of tokens and their plaintext
PII – the subject identities for the tokens of all other users remain secure through
use of a different secret key. For this reason, the hash values are encrypted with
each user’s respective secret key.</p>
<p><strong>Input:</strong></p>
<ul>
<li>
<p><strong><code>hash</code>:</strong> A 64 byte hash value produced by
  <a href="#hashing" class="ref">Section 6.1.2</a>.</p>
</li>
<li>
<p><strong><code>key</code>:</strong> The 32 byte AES key described in
  <a href="#aes_key" class="ref">Section 3.2</a>.</p>
</li>
</ul>
<p><strong>Process:</strong></p>
<p>Encrypt the hash value with the user’s AES key using the AES-GCM-SIV
encryption method. To ensure encryption is deterministic, a 12 byte
“nonce” of all zeros is used. It is critical to use the Synthetic
Initialization Vector (SIV) variation of AES-GCM because it protects
against catastrophic data loss when reusing a nonce
[RFC 8452].</p>
<p>In the context of tokenizing PII for PPRL, encryption must be 
deterministic to ensure that the same PII values result
in the same token and therefore can be linked with an equality
comparison.</p>
<p><strong>Result:</strong> The binary data of the encrypted token.</p>
<h3 id="614-representation">6.1.4 Representation</h3>
<p>The final token must be represented as text such that it can be easily
written to a large variety of data files and databases.</p>
<p><strong>Input:</strong> Binary data of the encrypted token produced in
<a href="#encrypting" class="ref">Section 6.1.3</a>.</p>
<p><strong>Process:</strong></p>
<p>The token binary is converted into a text representation using the
base64 encoding using the logic in the <code>BASE64_NO_NEWLINE</code> function
(See <a href="#funcs" class="ref">Section 4</a>).</p>
<p><strong>Result:</strong> The final token.</p>
<h2 id="62-token-specifications"><a name="token_specs"></a> 6.2 Token Specifications</h2>
<p>The following lists include the subsets of PII attributes from
<a href="#attributes" class="ref">Section 5</a> that are used to create each
canonical token in the OPPRL specification.</p>
<p>All attributes are listed in the exact lexicographical order (by name)
that they must appear in the joined PII string in
<a href="#joining" class="ref">Section 6.1.1</a>.</p>
<h3 id="versions-00">Versions &gt;=0.0</h3>
<ul>
<li>
<p><strong>Token 1</strong>: Birth Date, First Initial, Gender, Last Name</p>
</li>
<li>
<p><strong>Token 2</strong>: Birth Date, First Soundex, Gender, Last Soundex</p>
</li>
<li>
<p><strong>Token 3</strong>: Birth Date, First Metaphone, Gender, Last Metaphone</p>
</li>
</ul>
<h3 id="versions-10">Versions &gt;=1.0</h3>
<ul>
<li>
<p><strong>Token 4</strong>: Birth Date, First Initial, Last Name</p>
</li>
<li>
<p><strong>Token 5</strong>: Birth Date, First Soundex, Last Soundex</p>
</li>
<li>
<p><strong>Token 6</strong>: Birth Date, First Metaphone, Last Metaphone</p>
</li>
<li>
<p><strong>Token 7</strong>: First Name, Phone Number</p>
</li>
<li>
<p><strong>Token 8</strong>: Birth Date, Phone Number</p>
</li>
<li>
<p><strong>Token 9</strong>: First Name, Social Security Number</p>
</li>
<li>
<p><strong>Token 10</strong>: Birth Date, Social Security Number</p>
</li>
<li>
<p><strong>Token 11</strong>: Email Address</p>
</li>
<li>
<p><strong>Token 12</strong>: Hashed Email Address</p>
</li>
<li>
<p><strong>Token 13</strong>: Health Plan Group Number, Health Plan Member ID</p>
</li>
</ul>
<h1 id="7-transcoding-tokens"><a name="transcode"></a> 7. Transcoding Tokens</h1>
<p>A key function of Privacy Preserving Record Linkage (PPRL) is the
ability to associate records describing the same Subject without
requiring knowledge of the Subject’s identity. This task is commonly
called “linking” or “matching”.</p>
<p>A common use case is to link datasets originating from different
Custodians. As described above, every Custodian’s data assets have
tokens created from their unique private key(s) and therefore tokenized
data cannot be linked directly. This is important for preserving
security and privacy in the event of a Custodian data breach. In the
scenario where an untrusted third party obtains (potentially
re-identified) OPPRL tokens of one Custodian, all other Custodians with
OPPRL tokens are protected by the fact that their data assets contain
different token values for the same subjects.</p>
<p>To enable cross-custodian data linking without introducing a universal
token representation that could be used by untrusted third parties, a
“transcode” cryptographic workflow is performed in coordination between
Custodian and Recipient. The workflow is broken up into 2 data flows:
one performed by the Custodian to prepare data to be shared, and one
performed by the recipient to create linkable tokenized records.</p>
<h2 id="71-data-flow-custodian-tokens-to-ephemeral-tokens"><a name="transcode_out"></a> 7.1 Data Flow: Custodian Tokens to Ephemeral Tokens</h2>
<p>Prior to this data flow, the Recipient must have shared their public RSA
key with the Custodian that will be sending data. This key exchange can
occur over unsecured communication channels as long as the Recipient’s
private key has not been compromised and the Custodian has authenticated
the source of public key as the intended recipient. These topics are out
of scope for this protocol.</p>
<p><strong>Inputs:</strong></p>
<ul>
<li>
<p><strong><code>token</code>:</strong> A base64 encoded token
  (<a href="#tokenzize" class="ref">Section 6.1</a>)</p>
</li>
<li>
<p><strong><code>recipient_public_key</code>:</strong> The recipient’s public RSA key
  (<a href="#rsa_key" class="ref">Section 3.1</a>)</p>
</li>
<li>
<p><strong><code>private_key</code>:</strong> The custodian’s private RSA key
  (<a href="#rsa_key" class="ref">Section 3.1</a>)</p>
</li>
</ul>
<p><strong>Process:</strong></p>
<pre><code>b = UNBASE64(token)
h = DECRYPT_AES_GCM_SIV(b, private_key)
e = ENCRYPT_RSA(h, recipient_public_key)
return BASE64_NO_NEWLINE(e)
</code></pre>
<p>See function definitions in <a href="#funcs" class="ref"></a>.</p>
<p><strong>Result:</strong> A base64 encoded ephemeral token.</p>
<h2 id="72-data-flow-ephemeral-tokens-to-recipient-tokens">7.2 Data Flow: Ephemeral Tokens to Recipient Tokens</h2>
<p>This data flow is performed by a Recipient of ephemeral tokens created
by a Custodian with the Recipient’s public key. Ephemeral tokens are
base6</p>
<p><strong>Inputs:</strong></p>
<ul>
<li>
<p><strong><code>ephemeral_token</code>:</strong> A base64 encoded ephemeral token
  (<a href="#transcode_out" class="ref">Section 7.1</a>)</p>
</li>
<li>
<p><strong><code>private_key</code>:</strong> The recipient’s private RSA key
  (<a href="#rsa_key" class="ref">Section 3.1</a>)</p>
</li>
</ul>
<p><strong>Process:</strong></p>
<pre><code>b = UNBASE64(ephemeral_token)
h = DECRYPT_RSA(b, private_key)
t = ENCRYPT_AES_GCM_SIV(h, private_key)
return BASE64_NO_NEWLINE(t)
</code></pre>
<p>See function definitions in <a href="#funcs" class="ref"></a>.</p>
<p><strong>Result:</strong> A base64 encoded token that can be linked (via equality) to
other data assets tokenized with the same Recipient’s private key.</p>
<h1 id="8-security-engineering-considerations">8. Security Engineering Considerations</h1>
<p>This section contains information for implementers that falls outside
the scope of standardized tokenization and linking, but are important
considerations with respect to security and privacy. Ultimately,
implementers are responsible for making informed architectural decisions
based on the specific scenarios they are targeting.</p>
<h2 id="81-secrets-management">8.1 Secrets Management</h2>
<p>The security of OPPRL replies upon the secrecy of user’s private RSA
key, and the derived AES key. It is common for multiple individual users
(both personnel and systems) within the same user organization to
collaboratively maintain tokenized data assets, and therefore shared
access to the organization’s secret key is required.</p>
<p>It is highly recommended that users adopt a key management system with
role-based access control (RBAC) such that organization administrators
can enforce the principle of least privilege. In addition, using an
audit logging solution to record and monitor administrative and 
access activity related to private encryption keys is strongly 
recommended. </p>
<h2 id="82-key-rotation">8.2 Key Rotation</h2>
<p>Users should consider periodically rotating encryption keys to reduce
the volume of data encrypted with a single key and shorten the window
of vulnerability for a compromised key.</p>
<p>User’s can perform a one-time Transcoding workflow as described in
<a href="#transcode" class="ref">Section 7</a> where the user acts as both the
sending Custodian and the Recipient.</p>
<p>After rotating encryption keys, users must share their new public RSA
key with the custodians that send them data. </p>
<p>When data recipients use a key rotation policy, it is recommended that 
data custodian's sending data should communicate which public
key they are using. This communication can happen out-of-band or the sender 
can include some form of <a href="https://en.wikipedia.org/wiki/Checksum">checksum</a> 
generated from the public key used to transcode the tokens into ephemeral
tokens. This is currently out of scope for the OPPRL protocol.</p>
<h1 id="references">References</h1>
<p>[FIPS 202]
National Institute of Standards and Technology. 2015. “SHA-3 Standard:
Permutation-Based Hash and Extendable-Output Functions.” Federal
Information Processing Standards Publications (FIPS) 202. Washington,
D.C.: U.S. Department of Commerce.
<a href="https://doi.org/10.6028/nist.fips.202">https://doi.org/10.6028/nist.fips.202</a>.</p>
<p>[FIPS 180-4]
National Institute of Standards and Technology. 2023. “Secure Hash Standard 
(SHS).” Federal Information Processing Standards Publications (FIPS) 180-4,
 March 07, 2023 Revision. Washington, D.C.: U.S. Department of Commerce.
<a href="https://doi.org/10.6028/NIST.FIPS.180-4">https://doi.org/10.6028/NIST.FIPS.180-4</a>.</p>
<p>[RFC 2045]
Freed, Ned, and Dr. Nathaniel S. Borenstein. 1996.
“<span class="nocase">Multipurpose Internet Mail Extensions (MIME) Part
One: Format of Internet Message Bodies</span>.” Request for Comments.
RFC 2045; RFC Editor. <a href="https://doi.org/10.17487/RFC2045">https://doi.org/10.17487/RFC2045</a>.</p>
<p>[RFC 8452]
Gueron, Shay, Adam Langley, and Yehuda Lindell. 2019. “AES-GCM-SIV:
Nonce Misuse-Resistant Authenticated Encryption.” Request for Comments.
RFC 8452; RFC Editor. <a href="https://doi.org/10.17487/RFC8452">https://doi.org/10.17487/RFC8452</a>.</p>
<p>[RFC 4648]
Josefsson, Simon. 2006. “<span class="nocase">The Base16, Base32, and
Base64 Data Encodings</span>.” Request for Comments. RFC 4648; RFC
Editor. <a href="https://doi.org/10.17487/RFC4648">https://doi.org/10.17487/RFC4648</a>.</p>
<p>[RFC 5869]
Krawczyk, Hugo, and Pasi Eronen. 2010. “<span class="nocase">HMAC-based
Extract-and-Expand Key Derivation Function (HKDF)</span>.” Request for
Comments. RFC 5869; RFC Editor. <a href="https://doi.org/10.17487/RFC5869">https://doi.org/10.17487/RFC5869</a>.</p>
<p>[RFC 8017]
Moriarty, Kathleen, Burt Kaliski, Jakob Jonsson, and Andreas Rusch.
2016. “PKCS #1: RSA Cryptography Specifications Version 2.2.” Request
for Comments. RFC 8017; RFC Editor. <a href="https://doi.org/10.17487/RFC8017">https://doi.org/10.17487/RFC8017</a>.</p>
<p>[Liveramp 2022]
LiveRamp. 2022. “Email Hashing: The Trouble with Hashed Emails (HEMs).”
<a href="https://liveramp.com/blog/the-trouble-with-hashed-emails-hems/">https://liveramp.com/blog/the-trouble-with-hashed-emails-hems/</a>.</p>
<p>[Philips 1990]
Philips, Lawrence. 1990. “Hanging on the Metaphone.” In.
<a href="https://api.semanticscholar.org/CorpusID:59912108">https://api.semanticscholar.org/CorpusID:59912108</a>.</p>
<p>[Russel 1922]
Russell, Robert C. 1922. “Index.” U.S. Patent Office; U.S. Patent.</p>
<p>[ITU E.164]
International Telecommunication Union. 2010. “The International Public
Telecommunication Numbering Plan.” Recommendation ITU-T E.164.</p>
<p>[SSA 1982]
Social Security Administration. 1982. “Meaning of the Social Security
Number.” 11. Vol. 45. Social Security Administration.
<a href="https://www.ssa.gov/policy/docs/ssb/v45n11/v45n11p29.pdf">https://www.ssa.gov/policy/docs/ssb/v45n11/v45n11p29.pdf</a>.</p>
<p>[SSA 2011]
Social Security Administration. 2011. “Social Security Is Changing the
Way SSNs Are Issued.” Social Security Administration.
<a href="https://www.ssa.gov/kc/SSAFactSheet--IssuingSSNs.pdf">https://www.ssa.gov/kc/SSAFactSheet--IssuingSSNs.pdf</a>.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Spindle Health, Inc
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>