
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../guides/migrating-from-carduus/">
      
      
        <link rel="next" href="../cli/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>API - Spindle Token</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-KTQKK1C4F3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-KTQKK1C4F3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-KTQKK1C4F3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spindle_token" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Spindle Token" class="md-header__button md-logo" aria-label="Spindle Token" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spindle Token
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Spindle-Health/carduus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Spindle Token" class="md-nav__button md-logo" aria-label="Spindle Token" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Spindle Token
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Spindle-Health/carduus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spindle Token on Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/custom-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Tokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/migrating-from-carduus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from Carduus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spindle_token" class="md-nav__link">
    <span class="md-ellipsis">
      spindle_token
    </span>
  </a>
  
    <nav class="md-nav" aria-label="spindle_token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.tokenize" class="md-nav__link">
    <span class="md-ellipsis">
      tokenize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.transcode_out" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.transcode_in" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.generate_pem_keys" class="md-nav__link">
    <span class="md-ellipsis">
      generate_pem_keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spindle_token.opprl" class="md-nav__link">
    <span class="md-ellipsis">
      opprl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="opprl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.OpprlV0" class="md-nav__link">
    <span class="md-ellipsis">
      OpprlV0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.OpprlV1" class="md-nav__link">
    <span class="md-ellipsis">
      OpprlV1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.IdentityAttribute" class="md-nav__link">
    <span class="md-ellipsis">
      IdentityAttribute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spindle_token.core" class="md-nav__link">
    <span class="md-ellipsis">
      core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute" class="md-nav__link">
    <span class="md-ellipsis">
      PiiAttribute
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PiiAttribute">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.transform" class="md-nav__link">
    <span class="md-ellipsis">
      transform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      derivatives
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      TokenProtocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.tokenize" class="md-nav__link">
    <span class="md-ellipsis">
      tokenize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.transcode_out" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.transcode_in" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_in
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory" class="md-nav__link">
    <span class="md-ellipsis">
      TokenProtocolFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenProtocolFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory.bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.Token" class="md-nav__link">
    <span class="md-ellipsis">
      Token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Line Interface
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    carduus (legacy)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            carduus (legacy)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../carduus/guides/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../carduus/guides/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus on Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../carduus/guides/custom-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Defining Token Specs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../carduus/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../carduus/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Carduus CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OPPRL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            OPPRL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../opprl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../opprl/PROTOCOL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../opprl/contrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spindle_token" class="md-nav__link">
    <span class="md-ellipsis">
      spindle_token
    </span>
  </a>
  
    <nav class="md-nav" aria-label="spindle_token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.tokenize" class="md-nav__link">
    <span class="md-ellipsis">
      tokenize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.transcode_out" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.transcode_in" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.generate_pem_keys" class="md-nav__link">
    <span class="md-ellipsis">
      generate_pem_keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spindle_token.opprl" class="md-nav__link">
    <span class="md-ellipsis">
      opprl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="opprl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.OpprlV0" class="md-nav__link">
    <span class="md-ellipsis">
      OpprlV0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.OpprlV1" class="md-nav__link">
    <span class="md-ellipsis">
      OpprlV1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.opprl.IdentityAttribute" class="md-nav__link">
    <span class="md-ellipsis">
      IdentityAttribute
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spindle_token.core" class="md-nav__link">
    <span class="md-ellipsis">
      core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute" class="md-nav__link">
    <span class="md-ellipsis">
      PiiAttribute
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PiiAttribute">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.transform" class="md-nav__link">
    <span class="md-ellipsis">
      transform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.PiiAttribute.derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      derivatives
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol" class="md-nav__link">
    <span class="md-ellipsis">
      TokenProtocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.tokenize" class="md-nav__link">
    <span class="md-ellipsis">
      tokenize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.transcode_out" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_out
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocol.transcode_in" class="md-nav__link">
    <span class="md-ellipsis">
      transcode_in
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory" class="md-nav__link">
    <span class="md-ellipsis">
      TokenProtocolFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TokenProtocolFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.TokenProtocolFactory.bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spindle_token.core.Token" class="md-nav__link">
    <span class="md-ellipsis">
      Token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>API</h1>

<p>The spindle-token API is broken up into 3 namespaces: </p>
<ol>
<li>The top-level <code>spindle_token</code> module containing the most commonly used public functions.</li>
<li>An OPPRL module containing implementations of every OPPRL protocol version, including PII normalization, token specifications, and cryptographic transformations.</li>
<li>A module of <code>core</code> abstractions than can be extended in advanced use cases to add additional functionality.</li>
</ol>


<div class="doc doc-object doc-module">



<h2 id="spindle_token" class="doc doc-heading">
            <code>spindle_token</code>


</h2>

    <div class="doc doc-contents first">

        <p>A module containing the main API of spindle-token.</p>
<p>Most users will only need to use the 3 main functions in this top-level module along with the provided
configuration objects corresponding to OPPRL tokenization.</p>
<p>The 3 main functions provide tokenization and transcoding capabilities for data senders and recipients 
respectively.</p>








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="spindle_token.tokenize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tokenize</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col_mapping</span><span class="p">,</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Adds encrypted token columns based on PII.</p>
<p>All PII columns found in the <code>DataFrame</code> are normalized according and transformed as needed according to the <code>col_mapping</code>.
The PII attributes that make up of each <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token"><code>Token</code></a> objects in <code>tokens</code> are then hashed and
encrypted together according to their respective protocol versions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pyspark <code>DataFrame</code> containing all PII attributes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>col_mapping</code>
            </td>
            <td>
                  <code><span title="collections.abc.Mapping">Mapping</span>[<a class="autorefs autorefs-internal" title="PiiAttribute (spindle_token.core.PiiAttribute)" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary that maps instances of <a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute"><code>PiiAttribute</code></a> to the corresponding
column name of <code>df</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tokens</code>
            </td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection of <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token"><code>Token</code></a> objects that denotes which tokens (from which PII attributes)
should be added to the dataframe.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Your private RSA key. This argument should only be set when reading from a secrets manager or testing, otherwise it is
recommended to set the SPINDLE_TOKEN_PRIVATE_KEY environment variable with your private key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input <code>DataFrame</code> with by encrypted tokens added.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="spindle_token.transcode_out" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transcode_out</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">recipient_public_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Transcodes token columns of a dataframe into ephemeral tokens.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The pyspark <code>DataFrame</code> containing token columns.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tokens</code>
            </td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection of <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token"><code>Token</code></a> objects that denote which columns of the input dataframe
will be transcoded into ephemeral tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recipient_public_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The public RSA key of the recipient who will be receiving the dataset with ephemeral tokens. Can also be supplied
the SPINDLE_TOKEN_RECIPIENT_PUBLIC_KEY environment variable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Your private RSA key. This argument should only be set when reading from a secrets manager or testing, otherwise it is
recommended to set the SPINDLE_TOKEN_PRIVATE_KEY environment variable with your private key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    The <code>DataFrame</code> with the tokens replaced by ephemeral tokens for sending to the recipient.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="spindle_token.transcode_in" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transcode_in</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Transcodes ephemeral token columns into normal tokens.</p>
<p>Used by the data recipient of a dataset containing ephemeral tokens produced by <a class="autorefs autorefs-internal" title="transcode_out(df, tokens, recipient_public_key=None, private_key=None)" href="#spindle_token.transcode_out"><code>transcode_out</code></a>
to transcode the ephemeral tokens such that they will match other datasets tokenized with the same private key.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spark <code>DataFrame</code> with ephemeral token columns to transcode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tokens</code>
            </td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection of <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token"><code>Token</code></a> objects that denote which columns of the input dataframe
will be transcoded from ephemeral tokens into normal tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Your private RSA key. Must be the corresponding private key for the public key given to the sender when calling
<code>transcode_out</code>. This argument should only be set when reading from a secrets manager or testing, otherwise it is
recommended to set the SPINDLE_TOKEN_PRIVATE_KEY environment variable with your private key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The <code>DataFrame</code> with the ephemeral tokens replaced with normal tokens.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="spindle_token.generate_pem_keys" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_pem_keys</span><span class="p">(</span><span class="n">key_size</span><span class="o">=</span><span class="mi">2048</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates a fresh RSA key pair.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size (in bits) of the key.</p>
              </div>
            </td>
            <td>
                  <code>2048</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="bytes">bytes</span>, <span title="bytes">bytes</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing the private key and public key bytes. Both in the PEM encoding.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="spindle_token.opprl" class="doc doc-heading">
            <code>spindle_token.opprl</code>


</h2>

    <div class="doc doc-contents first">

        <p>A module of classes that provide standard configuration for different versions of the OPPRL protocol.</p>
<p>Each class is made up of class variables holding all instances of <a class="autorefs autorefs-internal" title="PiiAttribute" href="#spindle_token.core.PiiAttribute">PiiAttributes</a>,
<a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token">Token</a>, and <a class="autorefs autorefs-internal" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a> that make up
the complete spec of the corresponding OPPRL version.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="spindle_token.opprl.OpprlV0" class="doc doc-heading">
            <code>OpprlV0</code>


</h3>


    <div class="doc doc-contents ">


        <p>All instances of <a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>, <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token">Token</a>, and
<a class="autorefs autorefs-internal" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a> for v0 of the OPPRL protocol.</p>
<p>All members are class variables, and therefore this class does not need to be instantiated.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.first_name">first_name</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.NameAttribute">NameAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's first name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.last_name">last_name</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.NameAttribute">NameAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's last (aka family) name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.gender">gender</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.GenderAttribute">GenderAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's gender.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.birth_date">birth_date</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.DateAttribute">DateAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's date of birth.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.protocol">protocol</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TokenProtocolFactory (spindle_token.core.TokenProtocolFactory)" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tokenization protocol for producing OPPRL version 0 tokens.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.token1">token1</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first initial, last name, gender, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.token2">token2</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first soundex, last soundex, gender, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV0.token3">token3</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first metaphone, last metaphone, gender, and birth date.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="spindle_token.opprl.OpprlV1" class="doc doc-heading">
            <code>OpprlV1</code>


</h3>


    <div class="doc doc-contents ">


        <p>All instances of <a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>, <a class="autorefs autorefs-internal" title="Token


  
      dataclass
  " href="#spindle_token.core.Token">Token</a>, and
<a class="autorefs autorefs-internal" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a> for v1 of the OPPRL protocol.</p>
<p>All members are class variables, and therefore this class does not need to be instantiated.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.first_name">first_name</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.NameAttribute">NameAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's first name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.last_name">last_name</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.NameAttribute">NameAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's last (aka family) name.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.gender">gender</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.GenderAttribute">GenderAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's gender.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.birth_date">birth_date</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.DateAttribute">DateAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's date of birth.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.email">email</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.EmailAttribute">EmailAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's email address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.hem">hem</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.HashedEmail">HashedEmail</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's SHA2 hashed email address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.phone">phone</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.PhoneNumberAttribute">PhoneNumberAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's phone number.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.ssn">ssn</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.SsnAttribute">SsnAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's social security number.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.group_number">group_number</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.GroupNumberAttribute">GroupNumberAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's health plan group number.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.member_id">member_id</span></code></td>
            <td>
                  <code><span title="spindle_token.opprl._common.MemberIdAttribute">MemberIdAttribute</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PII attribute for a subject's health plan member ID.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.protocol">protocol</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TokenProtocolFactory (spindle_token.core.TokenProtocolFactory)" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tokenization protocol for producing OPPRL version 0 tokens.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token1">token1</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first initial, last name, gender, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token2">token2</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first soundex, last soundex, gender, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token3">token3</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first metaphone, last metaphone, gender, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token4">token4</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first initial, last name, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token5">token5</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first soundex, last soundex, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token6">token6</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first metaphone, last metaphone, and birth date.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token7">token7</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first name and phone number.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token8">token8</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from birth date and phone number.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token9">token9</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from first name and SSN.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token10">token10</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from birth date and SSN.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token11">token11</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from an email address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token12">token12</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from a SHA2 hashed email address.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.opprl.OpprlV1.token13">token13</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Token


  
      dataclass
   (spindle_token.core.Token)" href="#spindle_token.core.Token">Token</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A token generated from health plan group number and member ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="spindle_token.opprl.IdentityAttribute" class="doc doc-heading">
            <code>IdentityAttribute</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="PiiAttribute (spindle_token.core.PiiAttribute)" href="#spindle_token.core.PiiAttribute">PiiAttribute</a></code></p>


        <p>An implementation of <a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute">PiiAttribute</a> with no transformation (normalization) logic.</p>
<p>This class is useful when your data contains columns that can be used as attributes
as-is with no normalization. In particular, if your data has columns that correspond
to PII attributes that would typically be derived from other PII attributes, such as
the initial of the first name.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Create an identity attribute that uses the first initial directly
as opposed to deriving from the first name.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">attribute</span> <span class="o">=</span> <span class="n">IdentityAttribute</span><span class="p">(</span><span class="s2">&quot;opprl.v1.first.initial&quot;</span><span class="p">)</span>
</code></pre></div>
    <p>The transform method returns the input column unchanged.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">attribute</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_initial&quot;</span><span class="p">),</span> <span class="n">StringType</span><span class="p">())</span>
<span class="go">Column&lt;&#39;first_initial&#39;&gt;</span>
</code></pre></div>
    <p>There are no derivatives of identity attributes aside from the attribute itself.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">attribute</span><span class="o">.</span><span class="n">derivatives</span><span class="p">()</span>
<span class="go">{&#39;opprl.v1.first.initial&#39;: IdentityAttribute(opprl.v1.first.initial)}</span>
</code></pre></div>
    <p>Identity attributes can be passed to the tokenize function.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">spindle_token.opprl</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpprlV1</span> <span class="k">as</span> <span class="n">v1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokenize</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">df</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">IdentityAttribute</span><span class="p">(</span><span class="s2">&quot;opprl.v1.first.initial&quot;</span><span class="p">):</span> <span class="s2">&quot;first_initial&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">v1</span><span class="o">.</span><span class="n">last_name</span><span class="p">:</span> <span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">v1</span><span class="o">.</span><span class="n">gender</span><span class="p">:</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">v1</span><span class="o">.</span><span class="n">birth_date</span><span class="p">:</span> <span class="s2">&quot;birth_date&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">[</span><span class="n">v1</span><span class="o">.</span><span class="n">token1</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="go">DataFrame[first_initial: string, last_name: string, ..., opprl_token_1v1: string]</span>
</code></pre></div>









  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="spindle_token.core" class="doc doc-heading">
            <code>spindle_token.core</code>


</h2>

    <div class="doc doc-contents first">

        <p>The core abstractions of spindle-token, including abstract base classes for extending functionality.</p>
<p>The spindle-token library provides base interfaces that cane be extended by users to define custom token 
specifications to encrypt with existing versions of OPPRL cryptography protocols, or define entirely new 
tokenization protocols.</p>


<details class="warning" open>
  <summary>Warning</summary>
  <p>Extending the base classes in this module to customize the tokenization behavior has no security or 
privacy guarantees. These abstractions -- like all OSS -- are "use at your own risk" and users should
only use these advanced features if they understand them.</p>
</details>







  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="spindle_token.core.PiiAttribute" class="doc doc-heading">
            <code>PiiAttribute</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>An attribute (aka column) of personally identifiable information (PII) to use when constructing tokens.</p>
<p>This abstract base class is intended to be extended by users to add support for building tokens from a custom PII attribute.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.core.PiiAttribute.attr_id">attr_id</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An identifier for the PiiAttribute. Should be unique across all logically different PiiAttributes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.PiiAttribute.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">attr_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the PiiAttribute with the given globally unique attribute ID.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.PiiAttribute.transform" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transform</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Transforms the raw PII column into a normalized representation.</p>
<p>A normalized value has eliminated all representation or encoding differences so all instances of the
same logical values have identical physical values. For example, text attributes will often be normalized
by filtering to alpha-numeric characters and whitespace, standardizing all whitespace to the space character,
and converting all alpha characters to uppercase to ensure that all ways of representing the same phrase
normalize to the exact same string.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>column</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The spark <code>Column</code> expression for the PII attribute being normalized.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dtype</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.types.DataType">DataType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The spark <code>DataType</code> object of the <code>column</code> object found on the <code>DataFrame</code> being normalized.
Can be used to delegate to different normalization logic based on different schemas of input data.
For example, a subject's birth date may be a <code>DateType</code>, <code>StringType</code>, or <code>LongType</code> on input data and
thus requires corresponding normalization into a <code>DateType</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark Column expression of normalized PII values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.PiiAttribute.derivatives" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">derivatives</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>A collection of PII attributes that can be derived from this PII attribute, including this PiiAttribute.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="PiiAttribute (spindle_token.core.PiiAttribute)" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <code>dict</code> with globally unique (typically namespaced) attribute IDs as the key. Values are instances of</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="PiiAttribute (spindle_token.core.PiiAttribute)" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p><a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute">PiiAttribute</a> that produce normalized values for each derivative attribute</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="PiiAttribute (spindle_token.core.PiiAttribute)" href="#spindle_token.core.PiiAttribute">PiiAttribute</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>from the normalized values of this PiiAttribute.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="spindle_token.core.TokenProtocol" class="doc doc-heading">
            <code>TokenProtocol</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>An abstract base class for a specific version of the OPPRL tokenization protocol.</p>
<p>This abstract base class is intended to be extended by users who want to implement custom tokenization protocols.</p>
<p>It is assumed that instances of the <code>TokenProtocol</code> will provide any configuration or other inputs
(such as encryption keys) required to produce tokens. See <a class="autorefs autorefs-internal" href="#spindle_token.core.TokenProtocolFactory"><code>TokenProtocolFactory</code></a>
for more information.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.TokenProtocol.tokenize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tokenize</span><span class="p">(</span><span class="n">attribute_ids</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Creates a Column expression for a single token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>attribute_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection <a class="autorefs autorefs-internal" href="#spindle_token.core.PiiAttribute"><code>PiiAttribute</code></a> attribute IDs corresponding to the attributes
to combine into the token.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark <code>Column</code> expression representing token values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.TokenProtocol.transcode_out" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transcode_out</span><span class="p">(</span><span class="n">token</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Transcodes the given token into an ephemeral token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>token</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark <code>Column</code> of tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark <code>Column</code> expression of ephemeral tokens created from the input tokens.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.TokenProtocol.transcode_in" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transcode_in</span><span class="p">(</span><span class="n">ephemeral_token</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Transcodes the given ephemeral token into a normal token.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ephemeral_token</code>
            </td>
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark <code>Column</code> of ephemeral tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyspark.sql.Column">Column</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pyspark <code>Column</code> expression of tokens created from the input ephemeral tokens.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="spindle_token.core.TokenProtocolFactory" class="doc doc-heading">
            <code>TokenProtocolFactory</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code>, <code><span title="typing.Generic">Generic</span>[<span title="spindle_token.core.P">P</span>]</code></p>


        <p>An abstract base class for factories that instantiate <code>TokenProtocol</code> implementations with user provided encryption keys.</p>
<p>This abstract base class is intended to be extended by users who want to implement custom tokenization protocols.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.core.TokenProtocolFactory.factory_id">factory_id</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An identifier for the <code>TokenProtocolFactory</code>. Should be globally unique across all logically different <code>TokenProtocolFactory</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.TokenProtocolFactory.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">factory_id</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the <code>TokenProtocolFactory</code> with the given globally unique factory ID.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="spindle_token.core.TokenProtocolFactory.bind" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bind</span><span class="p">(</span><span class="n">private_key</span><span class="p">,</span> <span class="n">recipient_public_key</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Creates an instance of the <a class="autorefs autorefs-internal" href="#spindle_token.core.TokenProtocol">TokenProtocol</a> with the user provided encryption keys.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>private_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The private RSA key to use when tokenizing PII and transcoding tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>recipient_public_key</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The public RSA key of the intended data recipient to use when transcoding tokens into ephemeral tokens.
Can be <code>None</code> if the instance of <code>TokenProtocol</code> will not be transcoding tokens into ephemeral tokens.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="spindle_token.core.P">P</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a <code>TokenProtocol</code> implementation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="spindle_token.core.Token" class="doc doc-heading">
            <code>Token</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>A specification of a token.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.core.Token.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An identifier safe name for the attribute. Will be used as the column name on dataframes. Must be unique
across other <code>Token</code> specifications.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.core.Token.protocol">protocol</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TokenProtocolFactory (spindle_token.core.TokenProtocolFactory)" href="#spindle_token.core.TokenProtocolFactory">TokenProtocolFactory</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of <code>TokenProtocolFactory</code> that, when provided encryption keys, produced an instance of the
<code>TokenProtocol</code> that generates this kind of token.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="spindle_token.core.Token.attribute_ids">attribute_ids</span></code></td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A collection of attribute IDs used to lookup instances of <code>PiiAttribute</code> corresponding to the fields used to create the token.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>









  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Spindle Health, Inc
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>